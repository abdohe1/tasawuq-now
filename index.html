<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Tahoma,Arial}
body{margin:0;background:#f2f4f8}
header{
  background:linear-gradient(135deg,#0d6efd,#0aa2c0);
  padding:25px;text-align:center;color:#fff;
  border-bottom-left-radius:25px;
  border-bottom-right-radius:25px;
}
header h1{margin:0 0 15px}
header button{
  background:#fff;color:#0d6efd;border:none;
  padding:10px 16px;margin:5px;border-radius:12px;
  font-weight:bold;cursor:pointer
}
.container{padding:15px}
.card{
  background:#fff;padding:15px;border-radius:16px;
  margin-bottom:15px;box-shadow:0 3px 10px rgba(0,0,0,.08)
}
input,select{
  width:100%;padding:12px;margin-bottom:10px;
  border-radius:10px;border:1px solid #ccc
}
button.main{
  width:100%;background:#0d6efd;color:#fff;
  padding:12px;border:none;border-radius:12px;font-size:18px
}
.hidden{display:none}
.cat-grid{
  display:grid;grid-template-columns:repeat(3,1fr);gap:10px
}
.cat{background:#fff;padding:12px;border-radius:12px;text-align:center;cursor:pointer}
.price{color:green;font-weight:bold}
</style>
</head>

<body>

<header>
  <h1>ğŸ›’ ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</h1>
  <button onclick="showHome()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button onclick="showAdd()">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</button>
  <button onclick="showAuth()" id="btnAccount">Ø­Ø³Ø§Ø¨ÙŠ</button>
  <button onclick="logout()" id="btnLogout" class="hidden">Ø®Ø±ÙˆØ¬</button>
</header>

<!-- AUTH -->
<div class="container hidden" id="auth">
  <div class="card">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
    <input id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
    <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
    <button class="main" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <button class="main" style="margin-top:10px;background:#198754" onclick="register()">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
  </div>
</div>

<!-- HOME -->
<div class="container hidden" id="home">
  <div class="cat-grid">
    <div class="cat" onclick="filter('Ø§Ù„ÙƒÙ„')">ğŸ“¦ Ø§Ù„ÙƒÙ„</div>
    <div class="cat" onclick="filter('Ø³ÙŠØ§Ø±Ø§Øª')">ğŸš— Ø³ÙŠØ§Ø±Ø§Øª</div>
    <div class="cat" onclick="filter('Ø¯Ø±Ø§Ø¬Ø§Øª')">ğŸï¸ Ø¯Ø±Ø§Ø¬Ø§Øª</div>
    <div class="cat" onclick="filter('Ø§Ù„Ø¹Ø§Ø¨')">ğŸ® Ø§Ù„Ø¹Ø§Ø¨</div>
    <div class="cat" onclick="filter('Ø¹Ù‚Ø§Ø±Ø§Øª')">ğŸ  Ø¹Ù‚Ø§Ø±Ø§Øª</div>
    <div class="cat" onclick="filter('ÙˆØ¸Ø§Ø¦Ù')">ğŸ’¼ ÙˆØ¸Ø§Ø¦Ù</div>
  </div>
  <div id="posts"></div>
</div>

<!-- ADD -->
<div class="container hidden" id="add">
  <div class="card">
    <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
    <input id="price" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <select id="category">
      <option>Ø³ÙŠØ§Ø±Ø§Øª</option>
      <option>Ø¯Ø±Ø§Ø¬Ø§Øª</option>
      <option>Ø§Ù„Ø¹Ø§Ø¨</option>
      <option>Ø¹Ù‚Ø§Ø±Ø§Øª</option>
      <option>ÙˆØ¸Ø§Ø¦Ù</option>
    </select>
    <button class="main" onclick="savePost()">Ø­ÙØ¸</button>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
import { getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,onAuthStateChanged,signOut }
from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "Ø¶Ø¹_apiKey",
  authDomain: "tasawuq-now-eb955.firebaseapp.com",
  projectId: "tasawuq-now-eb955"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

let posts = JSON.parse(localStorage.getItem("posts")||"[]");
let currentCat="Ø§Ù„ÙƒÙ„";

const authBox=document.getElementById("auth");
const home=document.getElementById("home");
const add=document.getElementById("add");
const btnAccount=document.getElementById("btnAccount");
const btnLogout=document.getElementById("btnLogout");

function showAuth(){hideAll();authBox.classList.remove("hidden")}
function showHome(){hideAll();home.classList.remove("hidden");render()}
function showAdd(){hideAll();add.classList.remove("hidden")}
function hideAll(){authBox.classList.add("hidden");home.classList.add("hidden");add.classList.add("hidden")}

function login(){
  signInWithEmailAndPassword(auth,email.value,password.value)
}
function register(){
  createUserWithEmailAndPassword(auth,email.value,password.value)
}
function logout(){signOut(auth)}

onAuthStateChanged(auth,user=>{
  if(user){
    btnLogout.classList.remove("hidden");
    btnAccount.classList.add("hidden");
    showHome();
  }else{
    btnLogout.classList.add("hidden");
    btnAccount.classList.remove("hidden");
    showAuth();
  }
});

function savePost(){
  posts.push({
    title:title.value,
    price:price.value,
    category:category.value
  });
  localStorage.setItem("posts",JSON.stringify(posts));
  showHome();
}

function render(){
  const box=document.getElementById("posts");
  box.innerHTML="";
  posts.forEach(p=>{
    if(currentCat!=="Ø§Ù„ÙƒÙ„" && p.category!==currentCat)return;
    box.innerHTML+=`
      <div class="card">
        <h3>${p.title}</h3>
        <div>${p.category}</div>
        <div class="price">${p.price} ğŸ’°</div>
      </div>`;
  });
}

function filter(c){currentCat=c;render()}
</script>

</body>
</html>
