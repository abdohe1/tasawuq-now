<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</title>

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:#f4f6f8;
}
header{
  background:#0d6efd;
  color:#fff;
  padding:20px;
  text-align:center;
}
nav a{
  color:#fff;
  margin:0 10px;
  text-decoration:none;
  font-weight:bold;
  cursor:pointer;
}
.container{
  padding:20px;
}
.card{
  background:#fff;
  border-radius:8px;
  padding:15px;
  margin-bottom:15px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}
button{
  border:none;
  padding:8px 14px;
  border-radius:5px;
  cursor:pointer;
}
.add{background:#0d6efd;color:#fff}
.edit{background:#198754;color:#fff}
.delete{background:#dc3545;color:#fff}
input, textarea{
  width:100%;
  padding:10px;
  margin-bottom:10px;
}
img{
  max-width:100%;
  border-radius:6px;
}
</style>
</head>

<body>

<header>
  <h1>ğŸ›’ ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</h1>
  <nav>
    <a onclick="showHome()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a onclick="showForm()">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</a>
  </nav>
</header>

<div class="container">

  <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div id="home">
    <h2>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h2>
    <div id="posts"></div>
  </div>

  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
  <div id="form" style="display:none">
    <h2 id="formTitle">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</h2>
    <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
    <textarea id="desc" placeholder="ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"></textarea>
    <input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <input type="file" id="image">
    <img id="preview">
    <button class="add" onclick="save()">Ø­ÙØ¸</button>
  </div>

</div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let editIndex = null;
let imageData = "";

document.getElementById("image").addEventListener("change", function(){
  const file = this.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = () => {
    imageData = reader.result;
    document.getElementById("preview").src = imageData;
  }
  reader.readAsDataURL(file);
});

function render(){
  const box = document.getElementById("posts");
  box.innerHTML = "";
  posts.forEach((p,i)=>{
    box.innerHTML += `
      <div class="card">
        <h3>${p.title}</h3>
        <p>${p.desc}</p>
        <strong>ğŸ’° ${p.price}</strong><br><br>
        ${p.image ? `<img src="${p.image}">` : ""}
        <br><br>
        <button class="edit" onclick="editPost(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button class="delete" onclick="removePost(${i})">Ø­Ø°Ù</button>
      </div>
    `;
  });
  localStorage.setItem("posts", JSON.stringify(posts));
}

function showForm(){
  document.getElementById("home").style.display="none";
  document.getElementById("form").style.display="block";
}

function showHome(){
  document.getElementById("form").style.display="none";
  document.getElementById("home").style.display="block";
  clearForm();
}

function save(){
  const title = document.getElementById("title").value;
  const desc = document.getElementById("desc").value;
  const price = document.getElementById("price").value;

  if(editIndex === null){
    posts.push({title, desc, price, image:imageData});
  }else{
    posts[editIndex] = {title, desc, price, image:imageData};
    editIndex = null;
    document.getElementById("formTitle").innerText="Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†";
  }
  render();
  showHome();
}

function editPost(i){
  const p = posts[i];
  document.getElementById("title").value = p.title;
  document.getElementById("desc").value = p.desc;
  document.getElementById("price").value = p.price;
  document.getElementById("preview").src = p.image || "";
  imageData = p.image || "";
  editIndex = i;
  document.getElementById("formTitle").innerText="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†";
  showForm();
}

function removePost(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ")){
    posts.splice(i,1);
    render();
  }
}

function clearForm(){
  title.value="";
  desc.value="";
  price.value="";
  preview.src="";
  imageData="";
}

render();
</script>

</body>
</html>
