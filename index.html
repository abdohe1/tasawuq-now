<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Tahoma,Arial}
body{margin:0;background:#f2f4f8;color:#222}

/* HEADER */
header{
  background:linear-gradient(135deg,#0d6efd,#0aa2c0);
  padding:25px;
  text-align:center;
  color:white;
  border-bottom-left-radius:25px;
  border-bottom-right-radius:25px;
}
header h1{margin:0 0 15px}
header button{
  background:white;
  color:#0d6efd;
  border:none;
  padding:10px 16px;
  margin:5px;
  border-radius:12px;
  font-weight:bold;
  cursor:pointer;
}

/* SEARCH */
.search-box{margin:15px}
.search-box input{
  width:100%;padding:12px;border-radius:12px;
  border:1px solid #ddd;font-size:16px
}

/* CATEGORIES */
.categories{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;padding:15px
}
.cat{
  background:white;padding:15px;border-radius:14px;
  text-align:center;font-weight:bold;cursor:pointer
}

/* POSTS */
.posts{padding:15px}
.post{
  background:white;padding:15px;border-radius:16px;
  margin-bottom:15px;box-shadow:0 3px 10px rgba(0,0,0,.08)
}
.price{color:green;font-weight:bold;font-size:18px}
.post button{
  border:none;padding:10px;border-radius:10px;
  margin:5px 3px 0;color:white;cursor:pointer
}
.edit{background:#198754}
.delete{background:#dc3545}
.chat{background:#0d6efd}

/* SECTIONS */
.section{display:none;padding:15px}
input,select{
  width:100%;padding:12px;margin-bottom:10px;
  border-radius:10px;border:1px solid #ccc;font-size:16px
}
.main-btn{
  width:100%;padding:12px;border:none;
  border-radius:12px;background:#0d6efd;
  color:white;font-size:18px
}

/* CHAT */
.chat-box{
  background:white;
  height:300px;
  border-radius:12px;
  padding:10px;
  overflow-y:auto;
  margin-bottom:10px;
}
.msg{
  padding:8px 12px;
  margin:6px 0;
  border-radius:12px;
  max-width:75%;
}
.me{background:#0d6efd;color:white;margin-left:auto}
.other{background:#eee}
</style>
</head>

<body>

<header>
  <h1>ğŸ›’ ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</h1>
  <button onclick="showHome()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button onclick="showForm()">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</button>
  <button onclick="showMyAds()">Ø¥Ø¹Ù„Ø§Ù†Ø§ØªÙŠ</button>
  <button onclick="openAccount()">Ø­Ø³Ø§Ø¨ÙŠ</button>
</header>

<!-- HOME -->
<div id="home">
  <div class="search-box">
    <input placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¹Ù„Ø§Ù†..." oninput="search(this.value)">
  </div>

  <div class="categories">
    <div class="cat" onclick="filterCat('Ø§Ù„ÙƒÙ„')">ğŸ“¦ Ø§Ù„ÙƒÙ„</div>
    <div class="cat" onclick="filterCat('Ø³ÙŠØ§Ø±Ø§Øª')">ğŸš— Ø³ÙŠØ§Ø±Ø§Øª</div>
    <div class="cat" onclick="filterCat('Ø¯Ø±Ø§Ø¬Ø§Øª')">ğŸï¸ Ø¯Ø±Ø§Ø¬Ø§Øª</div>
    <div class="cat" onclick="filterCat('Ø§Ù„Ø¹Ø§Ø¨')">ğŸ® Ø§Ù„Ø¹Ø§Ø¨</div>
    <div class="cat" onclick="filterCat('Ø¹Ù‚Ø§Ø±Ø§Øª')">ğŸ  Ø¹Ù‚Ø§Ø±Ø§Øª</div>
    <div class="cat" onclick="filterCat('ÙˆØ¸Ø§Ø¦Ù')">ğŸ’¼ ÙˆØ¸Ø§Ø¦Ù</div>
  </div>

  <div class="posts" id="posts"></div>
</div>

<!-- ADD -->
<div id="form" class="section">
  <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
  <input id="price" type="number" placeholder="Ø§Ù„Ø³Ø¹Ø±">
  <select id="category">
    <option>Ø³ÙŠØ§Ø±Ø§Øª</option>
    <option>Ø¯Ø±Ø§Ø¬Ø§Øª</option>
    <option>Ø§Ù„Ø¹Ø§Ø¨</option>
    <option>Ø¹Ù‚Ø§Ø±Ø§Øª</option>
    <option>ÙˆØ¸Ø§Ø¦Ù</option>
  </select>
  <button class="main-btn" onclick="save()">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
</div>

<!-- LOGIN -->
<div id="login" class="section">
  <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
  <input id="loginEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="loginPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button class="main-btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  <p onclick="showRegister()" style="text-align:center;cursor:pointer">
    Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
  </p>
</div>

<!-- REGISTER -->
<div id="register" class="section">
  <h3>Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</h3>
  <input id="regName" placeholder="Ø§Ù„Ø§Ø³Ù…">
  <input id="regEmail" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
  <input id="regPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button class="main-btn" onclick="register()">ØªØ³Ø¬ÙŠÙ„</button>
</div>

<!-- ACCOUNT -->
<div id="account" class="section">
  <h3>ğŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ</h3>
  <p id="userInfo"></p>
  <button class="main-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
</div>

<!-- CHAT -->
<div id="chat" class="section">
  <h3 id="chatTitle"></h3>
  <div class="chat-box" id="chatBox"></div>
  <input id="chatInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©">
  <button class="main-btn" onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>

<script>
let posts=JSON.parse(localStorage.getItem("posts")||"[]");
let chats=JSON.parse(localStorage.getItem("chats")||"{}");
let editIndex=null,currentCat="Ø§Ù„ÙƒÙ„",user=JSON.parse(localStorage.getItem("user"));
let currentChat=null;
const postsBox=document.getElementById("posts");

/* NAV */
function hideAll(){
  home.style.display=form.style.display=login.style.display=
  register.style.display=account.style.display=chat.style.display="none";
}
function showHome(){hideAll();home.style.display="block";render()}
function showForm(){hideAll();form.style.display="block"}
function openAccount(){hideAll();user?showAccount():login.style.display="block"}
function showRegister(){hideAll();register.style.display="block"}
function showAccount(){account.style.display="block";userInfo.innerText="Ù…Ø±Ø­Ø¨Ù‹Ø§ "+user.name}

/* AUTH */
function register(){
  user={name:regName.value,email:regEmail.value,pass:regPass.value};
  localStorage.setItem("user",JSON.stringify(user));
  showAccount();
}
function login(){
  const u=JSON.parse(localStorage.getItem("user"));
  if(!u||u.email!==loginEmail.value||u.pass!==loginPass.value){alert("Ø®Ø·Ø£");return;}
  user=u;showAccount();
}
function logout(){user=null;localStorage.removeItem("user");showHome()}

/* POSTS */
function save(){
  if(!user){alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ");return;}
  const p={title:title.value,price:price.value,category:category.value,owner:user.email,id:Date.now()};
  editIndex===null?posts.push(p):posts[editIndex]=p;
  editIndex=null;localStorage.setItem("posts",JSON.stringify(posts));
  title.value=price.value="";showHome();
}
function render(){
  postsBox.innerHTML="";
  posts.forEach((p,i)=>{
    if(currentCat!=="Ø§Ù„ÙƒÙ„"&&p.category!==currentCat)return;
    let btns=`<button class="chat" onclick="openChat(${p.id},'${p.title}')">ğŸ’¬ Ø¯Ø±Ø¯Ø´Ø©</button>`;
    if(user&&p.owner===user.email){
      btns+=`<button class="edit" onclick="edit(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
             <button class="delete" onclick="removePost(${i})">Ø­Ø°Ù</button>`;
    }
    postsBox.innerHTML+=`
      <div class="post">
        <h3>${p.title}</h3>
        <div>${p.category}</div>
        <div class="price">${p.price} ğŸ’°</div>
        ${btns}
      </div>`;
  });
}
function edit(i){const p=posts[i];title.value=p.title;price.value=p.price;category.value=p.category;editIndex=i;showForm()}
function removePost(i){
  if(confirm("Ø­Ø°ÙØŸ")){posts.splice(i,1);localStorage.setItem("posts",JSON.stringify(posts));render()}
}
function showMyAds(){
  if(!user){alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ");return;}
  hideAll();home.style.display="block";
  postsBox.innerHTML="";
  posts.forEach((p,i)=>{
    if(p.owner===user.email){
      postsBox.innerHTML+=`
        <div class="post">
          <h3>${p.title}</h3>
          <div class="price">${p.price} ğŸ’°</div>
          <button class="edit" onclick="edit(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="delete" onclick="removePost(${i})">Ø­Ø°Ù</button>
        </div>`;
    }
  });
}
function filterCat(c){currentCat=c;render()}
function search(t){
  postsBox.innerHTML="";
  posts.filter(p=>p.title.includes(t)).forEach(p=>{
    postsBox.innerHTML+=`
      <div class="post">
        <h3>${p.title}</h3>
        <div class="price">${p.price} ğŸ’°</div>
      </div>`;
  });
}

/* CHAT */
function openChat(id,title){
  if(!user){alert("Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ");return;}
  currentChat=id;
  chatTitle.innerText="Ø¯Ø±Ø¯Ø´Ø©: "+title;
  renderChat();
  hideAll();chat.style.display="block";
}
function renderChat(){
  chatBox.innerHTML="";
  (chats[currentChat]||[]).forEach(m=>{
    chatBox.innerHTML+=`<div class="msg ${m.me?'me':'other'}">${m.text}</div>`;
  });
}
function sendMsg(){
  if(!chatInput.value)return;
  chats[currentChat]=chats[currentChat]||[];
  chats[currentChat].push({text:chatInput.value,me:true});
  localStorage.setItem("chats",JSON.stringify(chats));
  chatInput.value="";
  renderChat();
}

showHome();
</script>

</body>
</html>
