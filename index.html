<!DOCTYPE html>
<html lang="ar" dir=">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0d6efd">

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}
</script>
<head>
<meta charset="UTF-8">
<title>ØªØ³ÙˆÙ‘Ù‚ Ø§Ù„Ø¢Ù†</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  <script>
let posts = [];
let editIndex = null;

function showHome(){
  document.getElementById("form").style.display="none";
  document.getElementById("home").style.display="block";
  clearForm();
}

function showForm(){
  document.getElementById("home").style.display="none";
  document.getElementById("form").style.display="block";
}

function save(){
  const title = document.getElementById("title").value;
  const desc = document.getElementById("desc").value;
  const price = document.getElementById("price").value;

  if(editIndex === null){
    posts.push({title, desc, price});
  }else{
    posts[editIndex] = {title, desc, price};
    editIndex = null;
    document.getElementById("formTitle").innerText="Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†";
  }

  render();
  showHome();
}

function edit(i){
  const p = posts[i];
  document.getElementById("title").value = p.title;
  document.getElementById("desc").value = p.desc;
  document.getElementById("price").value = p.price;
  editIndex = i;
  document.getElementById("formTitle").innerText="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†";
  showForm();
}

function removePost(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ")){
    posts.splice(i,1);
    render();
  }
}

function clearForm(){
  document.getElementById("title").value="";
  document.getElementById("desc").value="";
  document.getElementById("price").value="";
}

function render(){
  const list = document.getElementById("list");
  list.innerHTML="";
  posts.forEach((p,i)=>{
    list.innerHTML += `
      <div class="card">
        <h3>${p.title}</h3>
        <p>${p.desc}</p>
        <strong>ğŸ’° ${p.price}</strong><br><br>
        <button onclick="edit(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button onclick="removePost(${i})">Ø­Ø°Ù</button>
      </div>
    `;
  });
}
</script>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#f4f6f8;
}
header{
  background:#0d6efd;
  color:#fff;
  padding:15px;
  text-align:center;
}
nav a{
  color:#fff;
  margin:0 10px;
  font-weight:bold;
  cursor:pointer;
}
.container{
  max-width:900px;
  margin:auto;
  padding:15px;
}
.card{
  background:#fff;
  padding:15px;
  border-radius:8px;
  margin-bottom:15px;
  box-shadow:0 2px 5px rgba(0,0,0,.1);
}
input, textarea{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:5px;
  border:1px solid #ccc;
}
button{
  background:#0d6efd;
  color:#fff;
  border:none;
  padding:10px 15px;
  border-radius:5px;
}
button.delete{background:#dc3545}
button.edit{background:#198754}
</style>
</head>

<header>
  <h2>ğŸ›’ ØªØ³ÙˆÙ‘Ù‚ Ø§Ù„Ø¢Ù†</h2>
  <nav>
    <a onclick="showHome()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a onclick="showForm()">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</a>
  </nav>
</header>

<div class="container">

  <!-- Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
  <div id="home">
    <h3>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
    <div id="list"></div>
  </div>

  <!-- Ø¥Ø¶Ø§ÙØ© / ØªØ¹Ø¯ÙŠÙ„ -->
  <div id="form" style="display:none">
    <h3 id="formTitle">Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†</h3>
 <input id="title" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">
<textarea id="desc" placeholder="ÙˆØµÙ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†"></textarea>
<input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±">

<input type="file" id="image" accept="image/*">
<img id="preview" style="max-width:100%;margin-top:10px;border-radius:8px">
    <button onclick="save()">Ø­ÙØ¸</button>
  </div>

</div>

<script>
let posts = JSON.parse(localStorage.getItem("posts")) || [];
let editIndex = null;

function render(){
  const list = document.getElementById("list");
  list.innerHTML = "";
  if(posts.length === 0){
    list.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø¹Ø¯</p>";
  }
  posts.forEach((p,i)=>{
    list.innerHTML += `
      <div class="card">
        <h4>${p.title}</h4>
        <p>${p.desc}</p>
        <strong>ğŸ’° ${p.price}</strong><br><br>
        <button class="edit" onclick="edit(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
        <button class="delete" onclick="remove(${i})">Ø­Ø°Ù</button>
      </div>
    `;
  });
  localStorage.setItem("posts", JSON.stringify(posts));
}

function showForm(){
  document.getElementById("home").style.display="none";
  document.getElementById("form").style.display="block";
}

function showHome(){
  document.getElementById("form").style.display="none";
  document.getElementById("home").style.display="block";
  clearForm();
}

<script>
let imageData = "";

document.getElementById("image").addEventListener("change", function(){
  const file = this.files[0];
  const reader = new FileReader();
  reader.onload = () => {
    imageData = reader.result;
    document.getElementById("preview").src = imageData;
  };
  reader.readAsDataURL(file);
});

function save(){
  const title = document.getElementById("title").value;
  const desc = document.getElementById("desc").value;
  const price = document.getElementById("price").value;

  if(editIndex === null){
    posts.push({title, desc, price, image:imageData});
  }else{
    posts[editIndex] = {title, desc, price, image:imageData};
    editIndex = null;
    document.getElementById("formTitle").innerText="Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†";
  }

  imageData = "";
  document.getElementById("preview").src="";
  render();
  showHome();
}
</script>

  if(editIndex === null){
    posts.push({title, desc, price});
  }else{
    posts[editIndex] = {title, desc, price};
    editIndex = null;
    document.getElementById("formTitle").innerText="Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù†";
  }
  render();
  showHome();
}

function edit(i){
  const p = posts[i];
  title.value = p.title;
  desc.value = p.desc;
  price.value = p.price;
  editIndex = i;
  document.getElementById("formTitle").innerText="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†";
  showForm();
}

function remove(i){
  if(confirm("Ø­Ø°Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ØŸ")){
    posts.splice(i,1);
    render();
  }
}

function clearForm(){
  title.value="";
  desc.value="";
  price.value="";
}

render();
</script>
</body>
</html>
